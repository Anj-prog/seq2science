

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Downloading fastqs &mdash; seq2science  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Alignment" href="alignment.html" />
    <link rel="prev" title="Workflows" href="../workflows.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> seq2science
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../gettingstarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fillingout.html">Filling out the samples.tsv and config.yaml</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../workflows.html">Workflows</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Downloading fastqs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#pipeline-steps">Pipeline steps</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#download-sra-file">Download SRA file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dump-the-sra-file-to-a-fastq-file">“Dump” the SRA file to a fastq file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#best-practices">Best practices</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#downloading-with-ascp">Downloading with ascp</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filetype-extensions-and-paired-end-suffix">Filetype extensions and paired-end suffix</a></li>
<li class="toctree-l4"><a class="reference internal" href="#downloading-many-samples">Downloading many samples</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fastq-dump-options">Fastq-dump options</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="alignment.html">Alignment</a></li>
<li class="toctree-l2"><a class="reference internal" href="atac_seq.html">ATAC-seq</a></li>
<li class="toctree-l2"><a class="reference internal" href="rna_seq.html">RNA-seq</a></li>
<li class="toctree-l2"><a class="reference internal" href="chip_seq.html">ChIP-seq</a></li>
<li class="toctree-l2"><a class="reference internal" href="scatac_seq.html">scATAC-seq</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../results.html">Using the results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../schemas.html">All configurable options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extracontent.html">Extra resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">seq2science</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../workflows.html">Workflows</a> &raquo;</li>
        
      <li>Downloading fastqs</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/vanheeringen-lab/seq2science/blob/master/docs/content/workflows/download_fastq.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="downloading-fastqs">
<h1>Downloading fastqs<a class="headerlink" href="#downloading-fastqs" title="Permalink to this headline">¶</a></h1>
<p>Downloading public data in bulk from the NCBI, ENA, and DDBJ databases has never been easier or faster!</p>
<div class="section" id="pipeline-steps">
<h2>Pipeline steps<a class="headerlink" href="#pipeline-steps" title="Permalink to this headline">¶</a></h2>
<p>TODO: image of steps</p>
<div class="section" id="download-sra-file">
<h3>Download SRA file<a class="headerlink" href="#download-sra-file" title="Permalink to this headline">¶</a></h3>
<p>Most databases do not store the actual fastqs, but they do all store the raw data (as a sra file). For this reason for each sample submitted the sra is downloaded. To convert this data to a fastq it has to be <em>dumped</em>.</p>
</div>
<div class="section" id="dump-the-sra-file-to-a-fastq-file">
<h3>“Dump” the SRA file to a fastq file<a class="headerlink" href="#dump-the-sra-file-to-a-fastq-file" title="Permalink to this headline">¶</a></h3>
<p>The second step is translating (dumping) the sra file to a fastq file.</p>
</div>
</div>
<div class="section" id="best-practices">
<h2>Best practices<a class="headerlink" href="#best-practices" title="Permalink to this headline">¶</a></h2>
<div class="section" id="downloading-with-ascp">
<h3>Downloading with ascp<a class="headerlink" href="#downloading-with-ascp" title="Permalink to this headline">¶</a></h3>
<p>ascp is a downloading protocol that allows for (sometimes much) faster speeds. If you have ascp installed you can make the workflow download through this protocol. You can specify the path to the binary in the config.yaml by key <code class="docutils literal notranslate"><span class="pre">ascp_path</span></code> and the ascp key in the config by key <code class="docutils literal notranslate"><span class="pre">ascp_key</span></code>:</p>
<p>See this <a class="reference external" href="https://gist.github.com/mfansler/71f09c8b6c9a95ec4e759a8ffc488be3">gist</a> for an easy installation of ascp.</p>
</div>
<div class="section" id="filetype-extensions-and-paired-end-suffix">
<h3>Filetype extensions and paired-end suffix<a class="headerlink" href="#filetype-extensions-and-paired-end-suffix" title="Permalink to this headline">¶</a></h3>
<p>The pipeline will save fastq files in the <em>fastq_dir</em> directory, which is located in the <em>result_dir</em> directory by default.</p>
<p>People and tools have different preferences for storing their data. One of these differences is how to name the fastq.gz files. Some people/tools prefer <code class="docutils literal notranslate"><span class="pre">fastq.gz</span></code>, while others prefer <code class="docutils literal notranslate"><span class="pre">fq.gz</span></code>. By default the pipeline names files with the fastq.gz extension. However if you prefer to change this you can set the variable <em>fqsuffix</em> accordingly.
The same goes for paired-end suffix conventions, most people prefer <code class="docutils literal notranslate"><span class="pre">sample_R1</span></code> which is our default. However you can use your preferred suffix by setting variables <em>fqext1</em> and <em>fqext2</em>.</p>
<p>In the`config.yaml:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span><span class="c">fastq_dir: ./my_first_fastq_dir</span>

fqsuffix: fastq
fqext1: R1
fqext2: R2
</pre></div>
</div>
</div>
<div class="section" id="downloading-many-samples">
<h3>Downloading many samples<a class="headerlink" href="#downloading-many-samples" title="Permalink to this headline">¶</a></h3>
<p>Before the pipeline starts downloading it will first determine whether the samples are paired-end or single-end. This is done by doing two requests per sample with the ncbi tools. Unregistered accounts can only make 3 requests per second. This means that initialization takes +/- 0.66s per sample. If you are an extremely impatient person, like us, you can up these numbers a with a <a class="reference external" href="https://ncbiinsights.ncbi.nlm.nih.gov/2017/11/02/new-api-keys-for-the-e-utilities/">ncbi api key</a> (their default one allows 10 request p/s). You can set the variables <em>ncbi_key</em> and <em>ncbi_requests</em> (the nr of requests per second) accordingly in the config.yaml.</p>
<p>The results of these lookups get cached, so when re-running parts of the workflow with the same samples no lookup online is required.</p>
</div>
<div class="section" id="fastq-dump-options">
<h3>Fastq-dump options<a class="headerlink" href="#fastq-dump-options" title="Permalink to this headline">¶</a></h3>
<p>We made a selection of <a class="reference external" href="https://edwards.sdsu.edu/research/fastq-dump/">reasonable parameters</a> for the dumping of SRAs to fastq. You can change these settings by changing the variable <em>splot</em> for single-end dumping, or the variable <em>split</em> for paired-end dumping, in the config.yaml, or on the command line.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="alignment.html" class="btn btn-neutral float-right" title="Alignment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../workflows.html" class="btn btn-neutral float-left" title="Workflows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Maarten van der Sande, Siebren Frölich, Jos Smits, &amp; Simon van Heeringen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>