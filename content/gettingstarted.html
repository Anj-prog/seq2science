

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Getting started &mdash; seq2science  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Filling out the samples.tsv and config.yaml" href="fillingout.html" />
    <link rel="prev" title="seq2science" href="../index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> seq2science
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-workflow">Running a workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="#where-does-the-workflow-store-results-and-looks-for-starting-points">Where does the workflow store results and looks for ‘starting points’?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#useful-settings">Useful settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-snakemake">What is Snakemake?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fillingout.html">Filling out the samples.tsv and config.yaml</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflows.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="results.html">Using the results</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensive_docs.html">Extensive docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="extracontent.html">Extra resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions (FAQ)</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">seq2science</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Getting started</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/vanheeringen-lab/seq2science/blob/master/docs/content/gettingstarted.md" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>TODO: conda instructions
Installation of seq2science has been made easy! All you have to do is follow these three simple steps:</p>
<ul class="simple">
<li><p>Download and install <a class="reference external" href="https://www.anaconda.com/">anaconda</a></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">wget</span> <span class="pre">https://repo.anaconda.com/archive/Anaconda3-2019.07-Linux-x86_64.sh</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">Anaconda3-2019.07-Linux-x86_64.sh</span></code> (make sure to say <strong>yes</strong> when asked to run conda init)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code></p></li>
</ul>
</li>
<li><p>clone the snakemake-workflows repository</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/vanheeringen-lab/snakemake-workflows.git</span></code></p></li>
</ul>
</li>
<li><p>Install the snakemake-workflows environment</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">snakemake-workflows/envs/snakemake-workflows.yaml</span></code></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="running-a-workflow">
<h2>Running a workflow<a class="headerlink" href="#running-a-workflow" title="Permalink to this headline">¶</a></h2>
<p>TODO: update for seq2science
To run a workflow all you need to do is follow these simple steps:</p>
<ul class="simple">
<li><p>Change to a workflow directory (e.g. download_fastq)</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">snakemake-workflows/workflows/download_fastq</span></code></p></li>
</ul>
</li>
<li><p>Activate the (previously installed) snakemake-workflows environment</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">snakemake-workflows</span></code></p></li>
</ul>
</li>
<li><p>Change the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> and <code class="docutils literal notranslate"><span class="pre">samples.tsv</span></code> to your needs (see <a class="reference external" href="https://github.com/vanheeringen-lab/snakemake-workflows/wiki/1.1-Filling-out-the-samples.tsv">filling out the samples.tsv</a> and <a class="reference external" href="https://github.com/vanheeringen-lab/snakemake-workflows/wiki/1.2-filling-out-the-config.yaml">filling out the config.yaml</a> for tips.</p></li>
<li><p>Run the workflow</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">snakemake</span> <span class="pre">--cores</span> <span class="pre">6</span> <span class="pre">--use-conda</span></code></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="where-does-the-workflow-store-results-and-looks-for-starting-points">
<h2>Where does the workflow store results and looks for ‘starting points’?<a class="headerlink" href="#where-does-the-workflow-store-results-and-looks-for-starting-points" title="Permalink to this headline">¶</a></h2>
<p>Under the hood we tell snakemake which output files we expect by editing the <code class="docutils literal notranslate"><span class="pre">samples.tsv</span></code>. Snakemake then takes a look at all the rules, decides which steps it need to take to generate this output. So if for instance half of a pipeline is already run (e.g. all the samples are already aligned), snakemake will continue from this point (it will not start by trimming again). By default, Snakemake will look for all the files in the <em>result_dir</em> directory and in the appropriate folders there, and a separate directory is specified for genomes with the <em>genome_dir</em>. A typical start of a project has this layout:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>workflow  # (e.g. alignment)
├── Snakefile
├── samples.tsv
├── config.yaml
|
├── {result_dir}
|   └── {fastq_dir}  # defaults to fastq
|       ├── sample1.fastq.gz
|       ├── sample2_pass_1.fastq.gz
|       └── sample2_pass_2.fastq.gz
|
└── {genome_dir}
    └── hg38
        └── hg38.fa
</pre></div>
</div>
<p>The organizers among us will appreciate that the directory layout can be customized to your heart’s desire, as all output directory destinations can be set in the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code>.</p>
</div>
<div class="section" id="useful-settings">
<h2>Useful settings<a class="headerlink" href="#useful-settings" title="Permalink to this headline">¶</a></h2>
<p>TODO: update docs
Snakemake has a lot of settings (see <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/executable.html#all-options">here</a> for all settings), but here are a couple useful settings we recommend for starting users:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--use-conda</span></code>: Every rule in this repository comes with a <em>conda environment</em>. This means that for every rule a set of dependencies is specified to execute that rule successfully. When the option use-conda is used snakemake will download and install this environment for each environment. It is virtually impossible to run these workflows without this option!</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--cores</span> <span class="pre">N</span></code>: The (maximum) amount of cores the workflow is allowed to use. Large parts of workflows can be executed in parallel (e.g. alignment of sample_1 and sample_2), and some applications even allow for <em>multithreading</em>. With this option you can make full use of your computer/server.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--keep-going</span></code>: Sometimes the workflow might encounter an error (although it really shouldn’t!). With this option snakemake will continue to finish the workflow for the parts that are independent of the error.</p></li>
</ul>
<p>A typical call to the workflow then look like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">snakemake</span> <span class="pre">--cores</span> <span class="pre">48</span> <span class="pre">--use-conda</span> <span class="pre">--keep-going</span></code></p>
<p>Take a look at <a class="reference external" href="https://github.com/vanheeringen-lab/snakemake-workflows/wiki/1.3-Making-a-snakemake-profile">making a snakemake profile</a> for making a profile in which you can specify default behaviour.</p>
</div>
<div class="section" id="what-is-snakemake">
<h2>What is Snakemake?<a class="headerlink" href="#what-is-snakemake" title="Permalink to this headline">¶</a></h2>
<p>Since all these workflows are based on <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/">Snakemake</a>
These workflows are all based on <a class="reference external" href="https://snakemake.readthedocs.io/en/stable/">Snakemake</a>, allowing for <strong>reproducible</strong> and <strong>scalable</strong> workflows.</p>
<ul class="simple">
<li><p>Automated installation of dependencies in self-contained environments through <a class="reference external" href="https://www.anaconda.com/">anaconda</a></p></li>
<li><p>Re-running the pipeline, either with a new configuration or new samples, is effortless</p></li>
<li><p>Can be run either on personal computers or superclusters, e.g. surfsara, with minimal finetuning</p></li>
<li><p>Is an extension on the Python language, which means easy to read (and maintain)</p></li>
</ul>
<p>Snakemake is a pipeline tool that allows users to specify <em>rules</em>. Each rule is defined with what it requires as input, what it will output, and what command it needs to run to generate the output from the input. This design allows for the linking of many rules, where the input of one rule is the output of another. When invoking Snakemake it will then decide itself which rules need to be run for the output you specified.</p>
<p>Here is an example Snakefile with just two (very simple) rules:</p>
<div class="highlight-guess notranslate"><div class="highlight"><pre><span></span>rule one:
    output:
        &quot;file1.txt&quot;
    shell:
        # for this example we just make an empty file
        &quot;touch {output}&quot;

rule two:
    input:
        &quot;file1.txt&quot;
    output:
        &quot;file2.txt&quot;
    shell:
        # for this example we just make an empty file
        &quot;touch {output}&quot;
</pre></div>
</div>
<p>We can tell snakemake to generate for instance file1.txt like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">snakemake</span> <span class="pre">file1.txt</span></code></p>
<p>And snakemake will see that rule one can generate this output, sees that it requires no input, and executes the shell command. If we tell snakemake to generate file2.txt:</p>
<p><code class="docutils literal notranslate"><span class="pre">snakemake</span> <span class="pre">file2.txt</span></code></p>
<p>It will see that rule two needs to be run, takes a look at the required input for this rule, and checks whether file1.txt already exists. If it does, it will immediatly execute rule two, if file1.txt does not already exist it will execute rule one first.</p>
<p>Our workflows work in a way that you specify which samples you have, and which workflow you want to run, and the workflow will decide which output corresponds to the combination of those samples and workflow. Snakemake will then take a look at all the rules that are defined, and will only use the ones that are required to generate the output specific to the workflow.</p>
<p>For a more complete explanation of how snakemake works see the <a class="reference external" href="https://snakemake.readthedocs.io/">snakemake docs</a>.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="fillingout.html" class="btn btn-neutral float-right" title="Filling out the samples.tsv and config.yaml" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../index.html" class="btn btn-neutral float-left" title="seq2science" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Maarten van der Sande, Siebren Frölich, Jos Smits, &amp; Simon van Heeringen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>